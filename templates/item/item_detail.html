{% extends 'base.html' %}

{% block body %}
<div class="container" id="itemdetail">
    <div class="row">
        <div class="col-6">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Anasayfa</a></li>
                    <li class="breadcrumb-item"><a href="#">category</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{item.name}}</li>
                </ol>
            </nav>
            <img id="itemdetail-image" src="{{item.picture.url}}" width="500px" height="500px" alt="ItemPicture">
        </div>
        <div class="col-6" id="itemdetail-description">
            {% if item.owner == request.user %}
                <a class="btn btn-outline-primary" href="{% url 'item-update' item.slug %}">Güncelle</a>
                <a class="btn btn-outline-danger" href="{% url 'item-update' item.slug %}">Sil</a>
            {% else %}
                {% if item.is_available %}
                <a class="btn btn-outline-success" href="#">Kirala</a>
                {% else %}
                <a class="btn btn-danger" href="#">Urun Kiralık Değil</a>
                {% endif %}
            {% endif %}
            <br>
            <br>
            <h3>₺{{item.price}}</h3>
            <br>
            <h4>{{item.name}}</h4>
            <br>
            <p class="font-italic">{{item.created_at}} tarihinde kiraya verildi</p>
            <hr>
            <p style="color:gray" >{{item.description}}</p>
            <div class="badge badge-danger text-wrap" id="itemdetail-owner" style="width: 6rem;">
                {{item.owner}}
            </div>
            <br>
            <p style="color:gray">Satıcıya mesaj at</p>
            <br>
            {{item.itemrental_set.all}}
            {% for rental in item.itemrental_set.all %}
            <div class="card">
                <div class="card-body">
                    {% if rental.fulfilled %}
                        <p> {{ rental.hirer }} tarafından kiralandı</p>
                    {% else %}
                        <p>{{ rental.hirer }} tarafından kiralama isteği
                        {% if item.owner == request.user %}
                            <a class="btn btn-sm btn-primary"
                               href="{% url "item_accept" pk=item.id rental_pk=rental.id %}">Kabul</a>
                        {% endif %}
                        </p>
                    {% endif %}                   
                    <p>Tarih: {{ rental.created }}</p>
                </div>
            </div>
            {% endfor %}

        </div>
    </div>
</div>

    
    
{% endblock body %}